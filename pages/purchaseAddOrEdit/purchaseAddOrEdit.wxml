<view class="page">
  <van-row>
    <van-cell-group>
      <van-cell
      is-link
      title="选择供应商"
      link-type="navigateTo"
      url="../supplier/supplier"
      value ="{{customer.companyName}}{{customer.name}}"
      input-align="right"
      />
    </van-cell-group>
  </van-row>
  <van-row class="margin-top">
    <van-cell-group>
      <van-field
      label="订单号"
      value="{{ code }}"
      placeholder="默认自动生成"
      input-align="right"
      />
    </van-cell-group>
  </van-row>
  <van-row>
    <van-cell
    is-link
    title="单据类型"
    bind:click="onSelect"
    value ="{{typeName}}"
    input-align="right"
    />
    <van-action-sheet
    title="单据类型"
    show="{{ showTypeSelect }}"
    actions="{{ actions }}"
    bind:close ="onClose"
    bind:select="onSelect"
    />
  </van-row>
  
  <van-row>
    <van-cell-group>
      <van-field
      label="送货单号"
      value="{{ freightCode }}"
      input-align="right"
      />
    </van-cell-group>
  </van-row>
  <van-row>
    <van-cell-group>
      <van-field
      label="备注"
      value="{{ memo }}"
      input-align="right"
      />
    </van-cell-group>
  </van-row>
  <van-row>
    <view class="cu-form-group">
      <view class="title">制单日期</view>
      <picker mode="date" value="{{orderDate}}" start="2019-09-01" end="2025-09-01" bindchange="DateChange">
        <view class="picker">
          {{orderDate}}
        </view>
      </picker>
    </view>
  </van-row>
  <van-row>
    <view class="cu-form-group">
      <view class="title">收货日期</view>
      <picker mode="date" value="{{deliveryDate}}" start="2019-09-01" end="2025-09-01" bindchange="DateChange2">
        <view class="picker">
          {{deliveryDate}}
        </view>
      </picker>
    </view>
  </van-row>
  <van-cell-group>
    <van-cell
    is-link
    title="添加商品"
    link-type="navigateTo"
    url="../product/product"
  />
  </van-cell-group>
  <scroll-view  scroll-y='true' > 
    <view  wx:for="{{productList}}"  class="bg-blue padding radius light">
      <van-swipe-cell right-width="{{ 65 }}"  bind:click="onCloseProduct" data-id="{{item.id}}">
        <van-cell-group>
          <i-card full title="{{item.name}}"  extra="{{item.code}}-{{item.spec}}"  i-class="card-demo">
            <view slot="content">
              价格：
              <view style="float:right">
                <i-input-number  value="{{item.purchasePrice}}" data-index="{{item.index}}" min="0" max="1000" step="0.001" bindchange="handleChangePrice" />
              </view>
            </view>
            <view slot="footer" >
              数量：
              <view style="float:right" >
                    <i-input-number value="{{item.number}}" data-index="{{item.index}}" min="0" max="1000000000" bindchange="handleChangeNumber"  />
                </view>
            </view>
          </i-card>
        </van-cell-group>
        <view slot="right" class="van-swipe-cell__right">删除</view>
      </van-swipe-cell>
    </view>
  </scroll-view>
  <i-divider ></i-divider>
  <i-divider ></i-divider>
  <van-submit-bar
  price="{{totalPrice}}"
  button-text="提交订单"
  bind:submit="onSubmit"
  decimal-length="3"
  />
</view>